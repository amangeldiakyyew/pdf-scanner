<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF AyrÄ±ÅŸtÄ±rma</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <h2>ğŸ“š MenÃ¼</h2>
            <a href="/settings">ğŸ“‚ Ayarlar</a>
            <a href="/pdf-parsing" class="active">âš™ï¸ PDF AyrÄ±ÅŸtÄ±rma</a>
        </nav>

        <main class="main-content">
            <h1>âš™ï¸ PDF AyrÄ±ÅŸtÄ±rma ve Rapor YÃ¶netimi</h1>
            <hr>

            <!-- Class Selection Section -->
            <section class="section">
                <h2>1. SÄ±nÄ±f SeÃ§imi ve Liste HazÄ±rlama</h2>
                
                <div class="form-group">
                    <label for="classSelectPdf">AyrÄ±ÅŸtÄ±rma YapÄ±lacak SÄ±nÄ±fÄ± SeÃ§in</label>
                    <select id="classSelectPdf" class="form-control">
                        <option value="">-- YÃ¼kleniyor --</option>
                    </select>
                </div>

                <div id="classInfo" class="alert alert-info" style="display: none;">
                    <strong id="studentCount">0</strong> Ã¶ÄŸrenci bu sÄ±nÄ±fta bulundu.
                </div>
            </section>

            <hr>

            <!-- PDF Upload Section -->
            <section class="section">
                <h2>2. PDF DosyasÄ± YÃ¼kleme ve BaÅŸlatma</h2>
                
                <div class="form-group">
                    <label for="pdfFile">Raporlar PDF DosyasÄ±nÄ± YÃ¼kleyin</label>
                    <input type="file" id="pdfFile" class="form-control" accept=".pdf">
                </div>

                <div id="uploadInfo" class="alert alert-success" style="display: none;"></div>

                <button id="parseButton" onclick="parsePdf()" class="btn btn-primary" disabled>
                    AyrÄ±ÅŸtÄ±rma Ä°ÅŸlemini BaÅŸlat
                </button>

                <div id="loadingSpinner" class="spinner" style="display: none;">
                    <div class="spinner-border"></div>
                    <span>Sayfalar taranÄ±yor ve sonuÃ§lar ayrÄ±ÅŸtÄ±rÄ±lÄ±yor...</span>
                </div>
            </section>

            <hr>

            <!-- Results Section -->
            <section class="section" id="resultsSection" style="display: none;">
                <h2>3. Ä°ÅŸlem Sonucu ve Raporlama</h2>

                <!-- Missing Students -->
                <div id="missingStudents" class="alert alert-warning" style="display: none;">
                    <h3>âŒ Bulunamayan Ã–ÄŸrenciler</h3>
                    <p id="missingCount"></p>
                    <div id="missingList"></div>
                    <div class="alert alert-info">
                        Ä°pucu: PDF'deki isimler, Ayarlar'daki isimlerle tam olarak eÅŸleÅŸmelidir.
                    </div>
                </div>

                <!-- Found Reports -->
                <div id="foundReports" style="display: none;">
                    <h3>ğŸ” Bulunan KayÄ±tlar (<span id="foundCount">0</span> Adet)</h3>

                    <div id="duplicateWarning" class="alert alert-warning" style="display: none;">
                        âš ï¸ <strong>DÄ°KKAT! MÃ¼kerrer KayÄ±tlar Olabilir, Kontrol Edin.</strong> AynÄ± Okul No'ya ait birden fazla sayfa bulunmuÅŸtur. Dosya adlarÄ± numaralandÄ±rÄ±lmÄ±ÅŸtÄ±r.
                    </div>

                    <div class="download-buttons">
                        <button onclick="downloadZip('schoolNo')" class="btn btn-primary">
                            ğŸ“ ZIP Ä°ndir (SADECE OKUL NO)
                        </button>
                        <button onclick="downloadZip('name')" class="btn btn-secondary">
                            ğŸ“ ZIP Ä°ndir (Ä°SÄ°M SOYÄ°SÄ°M)
                        </button>
                    </div>

                    <hr>

                    <h4>Bulunan KayÄ±tlar ve YÃ¶netimi (Silme Ä°ÅŸlemi)</h4>
                    
                    <div class="table-container">
                        <table class="table reports-table">
                            <thead>
                                <tr>
                                    <th style="width: 20%;">Aranan Ã–ÄŸrenci</th>
                                    <th style="width: 30%;">PDF'teki EÅŸleÅŸme BaÄŸlamÄ±</th>
                                    <th style="width: 15%;">Okul No AdÄ±</th>
                                    <th style="width: 10%;">Ä°ndir</th>
                                    <th style="width: 10%;">Sil</th>
                                </tr>
                            </thead>
                            <tbody id="reportsTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="notification" class="notification"></div>

    <script src="/js/pdf-parsing.js"></script>
</body>
</html>

